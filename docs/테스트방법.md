# MyApp Store í…ŒìŠ¤íŠ¸ ë°©ë²•

ì´ ë¬¸ì„œëŠ” MyApp Storeë¥¼ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ëª©ì°¨
1. [Synology NAS í™˜ê²½ í…ŒìŠ¤íŠ¸](#synology-nas-í™˜ê²½-í…ŒìŠ¤íŠ¸)
2. [ë¡œì»¬ Docker Compose í…ŒìŠ¤íŠ¸](#ë¡œì»¬-docker-compose-í…ŒìŠ¤íŠ¸)
3. [ë¡œì»¬ ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸](#ë¡œì»¬-ê°œë°œ-í™˜ê²½-í…ŒìŠ¤íŠ¸)
4. [API í…ŒìŠ¤íŠ¸](#api-í…ŒìŠ¤íŠ¸)
5. [ê¸°ëŠ¥ë³„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤](#ê¸°ëŠ¥ë³„-í…ŒìŠ¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤)

---

## Synology NAS í™˜ê²½ í…ŒìŠ¤íŠ¸

### 1. ì„¤ì¹˜ ë° ì‹¤í–‰

ìì„¸í•œ ì„¤ì¹˜ ë°©ë²•ì€ [Synology ì„¤ì¹˜ ê°€ì´ë“œ](./SYNOLOGY_INSTALLATION.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

```bash
# SSHë¡œ NAS ì ‘ì†
ssh admin@YOUR_NAS_IP

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /volume1/docker/myappstore

# ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### 2. ì ‘ì† í™•ì¸

**í”„ë¡ íŠ¸ì—”ë“œ:**
```
http://YOUR_NAS_IP:5900
```

**ë°±ì—”ë“œ API:**
```
http://YOUR_NAS_IP:8110/api/health
http://YOUR_NAS_IP:8110/docs  (Swagger UI)
```

### 3. ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### í…ŒìŠ¤íŠ¸ 1: ì´ˆê¸° ì„¤ì •
1. ë¸Œë¼ìš°ì €ì—ì„œ `http://YOUR_NAS_IP:5900` ì ‘ì†
2. ìë™ìœ¼ë¡œ `/setup` í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
3. ê´€ë¦¬ì ê³„ì • ìƒì„±
4. ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸

#### í…ŒìŠ¤íŠ¸ 2: ìŠ¤ìº” ê¸°ëŠ¥
1. í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±:
   ```bash
   # SSHì—ì„œ
   mkdir -p /volume1/docker/myappstore/data/library/TestApp
   touch "/volume1/docker/myappstore/data/library/TestApp/Adobe Photoshop 2024 v25.0.exe"
   ```

2. ì›¹ UIì—ì„œ:
   - `ê´€ë¦¬ì` â†’ `ìŠ¤ìº”` íƒ­
   - ìŠ¤ìº” ê²½ë¡œ: `/library`
   - `ìŠ¤ìº” ì‹œì‘` í´ë¦­
   - ê²°ê³¼ í™•ì¸

#### í…ŒìŠ¤íŠ¸ 3: ì œí’ˆ ì¡°íšŒ
1. `ìŠ¤í† ì–´` ë©”ë‰´ í´ë¦­
2. ìŠ¤ìº”ëœ ì œí’ˆ ëª©ë¡ í™•ì¸
3. ì œí’ˆ ìƒì„¸ í˜ì´ì§€ í™•ì¸
4. ë²„ì „ ì •ë³´ í™•ì¸

#### í…ŒìŠ¤íŠ¸ 4: íŒ¨ì¹˜ ë§í¬ ê¸°ëŠ¥ (v1.2.2-beta)
1. ì œí’ˆ ìƒì„¸ í˜ì´ì§€ â†’ `íŒ¨ì¹˜/í¬ë™` íƒ­
2. ê´€ë¦¬ì: ë§í¬ ì¶”ê°€ ë²„íŠ¼ í™•ì¸
3. ë§í¬ ì¶”ê°€ í…ŒìŠ¤íŠ¸:
   - ì œëª©: "ê³µì‹ ë‹¤ìš´ë¡œë“œ"
   - URL: "https://example.com"
   - ì €ì¥ í›„ í‘œì‹œ í™•ì¸

### 4. ë¡œê·¸ í™•ì¸

```bash
# ì „ì²´ ë¡œê·¸
docker-compose logs

# ì‹¤ì‹œê°„ ë¡œê·¸ (íŠ¹ì • ì„œë¹„ìŠ¤)
docker-compose logs -f backend
docker-compose logs -f frontend

# ì—ëŸ¬ë§Œ í•„í„°ë§
docker-compose logs | grep -i error
```

### 5. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

```bash
# ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec -it myapp-db psql -U postgres -d myappstore -c "SELECT COUNT(*) FROM products;"

# Redis ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec -it myapp-redis redis-cli ping
```

---

## ë¡œì»¬ Docker Compose í…ŒìŠ¤íŠ¸

### ë°©ë²• 1: Docker Compose ì‚¬ìš© (ê¶Œì¥)

ì „ì²´ ìŠ¤íƒ(DB + Backend + Frontend)ì„ í•œ ë²ˆì— ì‹¤í–‰:

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
cd /home/nuricom/project/myappStore

# Docker Composeë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f backend

# ì¤‘ì§€
docker-compose down
```

**ì ‘ì† ì£¼ì†Œ:**
- ë°±ì—”ë“œ: http://localhost:8110
- API ë¬¸ì„œ: http://localhost:8110/docs (Swagger UI)
- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5900

---

## ë¡œì»¬ ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸

### ë°©ë²• 2: ë¡œì»¬ ì§ì ‘ ì‹¤í–‰ (ê°œë°œìš©)

ë” ë¹ ë¥¸ ê°œë°œ/í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë°©ë²•:

#### 1. ë°ì´í„°ë² ì´ìŠ¤ë§Œ Dockerë¡œ ì‹¤í–‰

```bash
cd /home/nuricom/project/myappStore
docker-compose up -d db redis
```

#### 2. ë°±ì—”ë“œ ì‹¤í–‰

```bash
# ë°±ì—”ë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd backend

# ê°€ìƒí™˜ê²½ í™œì„±í™” (ì´ë¯¸ venvê°€ ìˆìœ¼ë©´)
source venv/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜ (ì²˜ìŒ í•œ ë²ˆë§Œ)
pip install -r requirements.txt

# ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
alembic upgrade head

# ì„œë²„ ì‹¤í–‰ (ê°œë°œ ëª¨ë“œ)
uvicorn app.main:app --host 0.0.0.0 --port 8110 --reload
```

**ì˜µì…˜ ì„¤ëª…:**
- `--host 0.0.0.0`: ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ìˆ˜ì‹ 
- `--port 8110`: í¬íŠ¸ 8110ì—ì„œ ì‹¤í–‰
- `--reload`: ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘ (ê°œë°œìš©)

#### 3. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

```bash
# ìƒˆ í„°ë¯¸ë„ì—ì„œ
cd frontend

# ì˜ì¡´ì„± ì„¤ì¹˜ (ì²˜ìŒ í•œ ë²ˆë§Œ)
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

### í™˜ê²½ ë³€ìˆ˜ í™•ì¸

`backend/.env` íŒŒì¼ í™•ì¸:
```bash
DATABASE_URL=postgresql://postgres:password@localhost:5432/myappstore
REDIS_URL=redis://localhost:6379/0
SECRET_KEY=your-secret-key
OPENAI_API_KEY=sk-your-api-key  # ì„ íƒì‚¬í•­
```

---

## API í…ŒìŠ¤íŠ¸

### Swagger UI ì‚¬ìš©

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8110/docs` ì ‘ì†:

1. **ì¸ì¦ í…ŒìŠ¤íŠ¸:**
   - `/api/auth/login` ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ
   - `Try it out` í´ë¦­
   - ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
   - `Execute` í´ë¦­
   - ì‘ë‹µì—ì„œ `access_token` í™•ì¸

2. **ì¸ì¦ í† í° ì„¤ì •:**
   - ìš°ì¸¡ ìƒë‹¨ `Authorize` ë²„íŠ¼ í´ë¦­
   - `Bearer YOUR_TOKEN` í˜•ì‹ìœ¼ë¡œ ì…ë ¥
   - `Authorize` í´ë¦­

3. **API í˜¸ì¶œ:**
   - ì›í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ
   - `Try it out` í´ë¦­
   - í•„ìš”í•œ íŒŒë¼ë¯¸í„° ì…ë ¥
   - `Execute` í´ë¦­

### curl ì‚¬ìš©

```bash
# Health Check
curl http://localhost:8110/api/health

# ë¡œê·¸ì¸
curl -X POST "http://localhost:8110/api/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=yourpassword"

# ì œí’ˆ ëª©ë¡ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
TOKEN="your_access_token"
curl -X GET "http://localhost:8110/api/products/" \
  -H "Authorization: Bearer $TOKEN"

# í†µê³„ ì¡°íšŒ
curl -X GET "http://localhost:8110/api/products/stats/overview" \
  -H "Authorization: Bearer $TOKEN"
```

### Postman/Insomnia ì‚¬ìš©

1. ìƒˆ ì»¬ë ‰ì…˜ ìƒì„±
2. Authorization ì„¤ì •:
   - Type: Bearer Token
   - Token: ë¡œê·¸ì¸ìœ¼ë¡œ ë°›ì€ access_token
3. ìš”ì²­ ìƒì„± ë° í…ŒìŠ¤íŠ¸

---

## ê¸°ëŠ¥ë³„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. ì¸ì¦ ë° ê¶Œí•œ

#### ì´ˆê¸° ì„¤ì •
```bash
# 1. ì„¤ì • í˜ì´ì§€ í™•ì¸
curl http://localhost:8110/api/auth/check-setup
# ì‘ë‹µ: {"setup_required": true}

# 2. ê´€ë¦¬ì ê³„ì • ìƒì„±
curl -X POST "http://localhost:8110/api/auth/setup" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"secure123"}'
```

#### ë¡œê·¸ì¸
```bash
curl -X POST "http://localhost:8110/api/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=secure123"
```

### 2. íŒŒì¼ ìŠ¤ìº”

#### ìˆ˜ë™ ìŠ¤ìº”
```bash
# ê´€ë¦¬ì í† í°ìœ¼ë¡œ
curl -X POST "http://localhost:8110/api/scan/start" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "scan_path": "/library",
    "use_ai": false
  }'
```

#### ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
```bash
# ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘
curl -X POST "http://localhost:8110/api/scheduler/start" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "cron_schedule": "0 2 * * *",
    "scan_paths": ["/library"],
    "use_ai": true
  }'

# ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ í™•ì¸
curl -X GET "http://localhost:8110/api/scheduler/status" \
  -H "Authorization: Bearer $ADMIN_TOKEN"
```

### 3. ì œí’ˆ ê´€ë¦¬

#### ì œí’ˆ ëª©ë¡ ì¡°íšŒ
```bash
# ê¸°ë³¸ ëª©ë¡
curl "http://localhost:8110/api/products/" \
  -H "Authorization: Bearer $TOKEN"

# í•„í„°ë§
curl "http://localhost:8110/api/products/?category=Graphics&vendor=Adobe" \
  -H "Authorization: Bearer $TOKEN"

# ê²€ìƒ‰
curl "http://localhost:8110/api/products/?search=photoshop" \
  -H "Authorization: Bearer $TOKEN"
```

#### ì œí’ˆ ìƒì„¸ ì¡°íšŒ
```bash
curl "http://localhost:8110/api/products/1" \
  -H "Authorization: Bearer $TOKEN"
```

#### ì œí’ˆ ë©”íƒ€ë°ì´í„° ìˆ˜ì • (ê´€ë¦¬ì)
```bash
curl -X PUT "http://localhost:8110/api/products/1" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Adobe Photoshop 2024",
    "description": "Professional image editing software",
    "category": "Graphics"
  }'
```

### 4. íŒ¨ì¹˜ ë§í¬ ê¸°ëŠ¥ (v1.2.2)

#### ë§í¬ ì¶”ê°€
```bash
curl -X PUT "http://localhost:8110/api/products/1" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "patch_links": [
      {
        "title": "ê³µì‹ ë‹¤ìš´ë¡œë“œ",
        "url": "https://example.com/download"
      },
      {
        "title": "íŒ¨ì¹˜ íŒŒì¼",
        "url": "https://example.com/patch"
      }
    ]
  }'
```

#### ë§í¬ ì¡°íšŒ
```bash
curl "http://localhost:8110/api/products/1" \
  -H "Authorization: Bearer $TOKEN" | jq '.patch_links'
```

### 5. ì²¨ë¶€ íŒŒì¼ (íŒ¨ì¹˜/í¬ë™)

#### íŒŒì¼ ì—…ë¡œë“œ
```bash
curl -X POST "http://localhost:8110/api/attachments/upload" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -F "file=@/path/to/patch.zip" \
  -F "product_id=1" \
  -F "type=patch" \
  -F "note=Version 2.0 patch"
```

#### íŒŒì¼ ëª©ë¡ ì¡°íšŒ
```bash
curl "http://localhost:8110/api/attachments/product/1" \
  -H "Authorization: Bearer $TOKEN"
```

### 6. ì¦ê²¨ì°¾ê¸° ë° ìŠ¤í¬ë©

#### ì¦ê²¨ì°¾ê¸° ì¶”ê°€
```bash
curl -X POST "http://localhost:8110/api/favorites/1" \
  -H "Authorization: Bearer $TOKEN"
```

#### ìŠ¤í¬ë© ì¶”ê°€
```bash
curl -X POST "http://localhost:8110/api/scraps/1" \
  -H "Authorization: Bearer $TOKEN"
```

### 7. ì„¤ì • ê´€ë¦¬

#### ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
```bash
curl "http://localhost:8110/api/config/categories" \
  -H "Authorization: Bearer $TOKEN"
```

#### ì¹´í…Œê³ ë¦¬ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ì)
```bash
curl -X PUT "http://localhost:8110/api/config/categories" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '[
    {"name": "Graphics", "label": "ê·¸ë˜í”½", "icon": "ğŸ¨"},
    {"name": "Office", "label": "ì˜¤í”¼ìŠ¤", "icon": "ğŸ“Š"}
  ]'
```

---

## í¬íŠ¸ ì¶©ëŒ í•´ê²°

### í¬íŠ¸ ì‚¬ìš© í™•ì¸

```bash
# Linux/Mac
lsof -ti:8110 | xargs kill -9  # í¬íŠ¸ 8110 ê°•ì œ ì¢…ë£Œ
sudo lsof -t -i:8110           # í¬íŠ¸ 8110 ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ í™•ì¸
netstat -nap | grep 8110       # í¬íŠ¸ 8110 ìƒíƒœ í™•ì¸

# Synology
netstat -tuln | grep 8110
```

### Docker Compose í¬íŠ¸ ë³€ê²½

`docker-compose.yml` ìˆ˜ì •:
```yaml
services:
  backend:
    ports:
      - "8101:8110"  # 8110 ëŒ€ì‹  8101 ì‚¬ìš©
  frontend:
    ports:
      - "5901:5900"  # 5900 ëŒ€ì‹  5901 ì‚¬ìš©
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬

### PostgreSQL ì ‘ì†

```bash
# Docker í™˜ê²½
docker exec -it myapp-db psql -U postgres -d myappstore

# ë¡œì»¬ í™˜ê²½
psql -U postgres -d myappstore
```

### ìœ ìš©í•œ SQL ì¿¼ë¦¬

```sql
-- ì œí’ˆ ìˆ˜ í™•ì¸
SELECT COUNT(*) FROM products;

-- ì¹´í…Œê³ ë¦¬ë³„ ì œí’ˆ ìˆ˜
SELECT category, COUNT(*)
FROM products
GROUP BY category
ORDER BY COUNT(*) DESC;

-- ìµœê·¼ ìŠ¤ìº” íˆìŠ¤í† ë¦¬
SELECT * FROM scan_history
ORDER BY started_at DESC
LIMIT 5;

-- ì‚¬ìš©ì ëª©ë¡
SELECT id, username, role, created_at FROM users;
```

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ë° ë³µì›

```bash
# ë°±ì—…
docker exec myapp-db pg_dump -U postgres myappstore > backup_$(date +%Y%m%d).sql

# ë³µì›
docker exec -i myapp-db psql -U postgres myappstore < backup_20260119.sql
```

---

## ë¡œê·¸ ë¶„ì„

### ë°±ì—”ë“œ ë¡œê·¸

```bash
# Docker
docker-compose logs -f backend

# ì—ëŸ¬ë§Œ í™•ì¸
docker-compose logs backend | grep -i error

# íŠ¹ì • ì‹œê°„ ì´í›„ ë¡œê·¸
docker-compose logs --since "2026-01-19T10:00:00" backend
```

### í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸

```bash
# Docker
docker-compose logs -f frontend

# ë¸Œë¼ìš°ì € ì½˜ì†”
# F12 â†’ Console íƒ­
```

### ë°ì´í„°ë² ì´ìŠ¤ ë¡œê·¸

```bash
# PostgreSQL ë¡œê·¸ (Synology)
tail -f /volume1/docker/myappstore/data/logs/postgresql/*.log

# Docker
docker-compose logs db
```

---

## ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### ì‘ë‹µ ì‹œê°„ ì¸¡ì •

```bash
# curlë¡œ ì‘ë‹µ ì‹œê°„ ì¸¡ì •
curl -o /dev/null -s -w "Time: %{time_total}s\n" \
  http://localhost:8110/api/products/

# Apache Bench
ab -n 100 -c 10 http://localhost:8110/api/products/
```

### ë¶€í•˜ í…ŒìŠ¤íŠ¸

```bash
# wrk ì‚¬ìš©
wrk -t4 -c100 -d30s http://localhost:8110/api/products/

# 4 threads, 100 connections, 30 seconds
```

---

## ë¬¸ì œ í•´ê²°

### ë°±ì—”ë“œ ì‹œì‘ ì‹¤íŒ¨

```bash
# ë¡œê·¸ í™•ì¸
docker-compose logs backend

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
docker exec myapp-backend ping -c 3 db

# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸
docker exec myapp-backend alembic current
```

### í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì˜¤ë¥˜

```bash
# node_modules ì¬ì„¤ì¹˜
rm -rf frontend/node_modules
docker-compose build frontend --no-cache
docker-compose up -d frontend
```

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜

```bash
# PostgreSQL ì¬ì‹œì‘
docker-compose restart db

# ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec myapp-db pg_isready -U postgres
```

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- **Swagger UI**: http://localhost:8110/docs
- **ReDoc**: http://localhost:8110/redoc
- **í”„ë¡œì íŠ¸ GitHub**: https://github.com/zardkim/my-appstore
- **Synology ì„¤ì¹˜ ê°€ì´ë“œ**: [SYNOLOGY_INSTALLATION.md](./SYNOLOGY_INSTALLATION.md)
- **CLAUDE.md**: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ
